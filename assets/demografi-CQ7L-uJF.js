import{w as f,a as o,p as e}from"./chunk-PVWAREVJ-DLjrMCpa.js";const K={totalPenduduk:3250,totalKK:820,mataPencaharian:{Petani:380,Nelayan:120,Pedagang:210,"PNS/ASN":45,Wiraswasta:60,Buruh:90,Lainnya:15},households:[{id:"KK-001",namaKepala:"Ahmad",jumlahAnggota:5,pekerjaan:"Petani",alamat:"Dusun A"},{id:"KK-002",namaKepala:"Siti",jumlahAnggota:4,pekerjaan:"Pedagang",alamat:"Dusun B"},{id:"KK-003",namaKepala:"Budi",jumlahAnggota:3,pekerjaan:"Nelayan",alamat:"Dusun A"}]};function j(m){return m.toLocaleString("id-ID")}const w=f(function({data:t=K}){const[d,h]=o.useState(""),[l,u]=o.useState("Semua"),g=o.useMemo(()=>["Semua",...Object.keys(t.mataPencaharian)],[t]),c=o.useMemo(()=>{const a=d.trim().toLowerCase();return t.households.filter(s=>{const n=l==="Semua"?!0:s.pekerjaan===l,i=!a||s.id.toLowerCase().includes(a)||s.namaKepala.toLowerCase().includes(a)||(s.alamat||"").toLowerCase().includes(a);return n&&i})},[t,d,l]),b=Math.max(...Object.values(t.mataPencaharian),1);function y(){const a=["ID KK","Nama Kepala","Jumlah Anggota","Pekerjaan","Alamat"],s=t.households.map(r=>[r.id,r.namaKepala,String(r.jumlahAnggota),r.pekerjaan,r.alamat??""]),n=[a,...s].map(r=>r.map(N=>`"${String(N).replace(/"/g,'""')}"`).join(",")).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(i),x=document.createElement("a");x.href=p,x.download=`demografi_kk_${new Date().toISOString().slice(0,10)}.csv`,x.click(),URL.revokeObjectURL(p)}return e.jsxs("div",{className:"w-full max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold text-gray-900",children:"Data Demografi Desa"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ringkasan jumlah penduduk, rumah tangga (KK) dan mata pencaharian."})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("div",{className:"hidden sm:flex gap-2",children:[e.jsx("input",{value:d,onChange:a=>h(a.target.value),placeholder:"Cari KK / nama kepala / alamat...",className:"rounded-lg border border-gray-300 px-3 py-2 w-64 focus:outline-none focus:ring-2 focus:ring-green-600"}),e.jsx("select",{value:l,onChange:a=>u(a.target.value),className:"rounded-lg border border-gray-300 px-3 py-2 focus:outline-none",children:g.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsx("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded-lg shadow hover:bg-green-700",title:"Export data KK ke CSV",children:"Export CSV"})]})]}),e.jsxs("section",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow border border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Penduduk"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j(t.totalPenduduk)})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow border border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total KK"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j(t.totalKK)})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow border border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Rata-rata Anggota / KK"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Math.round(t.totalPenduduk/Math.max(1,t.totalKK)*10)/10})]})]}),e.jsxs("section",{className:"bg-white rounded-2xl p-4 shadow border border-gray-100 mb-6",children:[e.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Mata Pencaharian"}),e.jsx("div",{className:"space-y-3",children:Object.entries(t.mataPencaharian).map(([a,s])=>{const n=Math.round(s/b*100);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-40 text-sm text-gray-700",children:a}),e.jsx("div",{className:"flex-1 bg-gray-100 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:"h-4 rounded-full bg-green-600",style:{width:`${n}%`,maxWidth:"100%"}})}),e.jsx("div",{className:"w-20 text-right text-sm text-gray-600",children:s})]},a)})})]}),e.jsxs("section",{className:"bg-white rounded-2xl p-4 shadow border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Daftar KK"}),e.jsxs("div",{className:"sm:hidden flex gap-2",children:[e.jsx("input",{value:d,onChange:a=>h(a.target.value),placeholder:"Cari...",className:"rounded-lg border border-gray-300 px-3 py-2 w-40 focus:outline-none focus:ring-2 focus:ring-green-600"}),e.jsx("select",{value:l,onChange:a=>u(a.target.value),className:"rounded-lg border border-gray-300 px-3 py-2 focus:outline-none",children:g.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left table-auto",children:[e.jsx("thead",{className:"text-sm text-gray-600 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-3",children:"ID KK"}),e.jsx("th",{className:"py-2 px-3",children:"Nama Kepala"}),e.jsx("th",{className:"py-2 px-3",children:"Jumlah Anggota"}),e.jsx("th",{className:"py-2 px-3",children:"Pekerjaan"}),e.jsx("th",{className:"py-2 px-3",children:"Alamat"})]})}),e.jsxs("tbody",{children:[c.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-3 text-sm text-gray-700",children:a.id}),e.jsx("td",{className:"py-3 px-3 text-sm text-gray-700",children:a.namaKepala}),e.jsx("td",{className:"py-3 px-3 text-sm text-gray-700",children:a.jumlahAnggota}),e.jsx("td",{className:"py-3 px-3 text-sm text-gray-700",children:a.pekerjaan}),e.jsx("td",{className:"py-3 px-3 text-sm text-gray-700",children:a.alamat})]},a.id)),c.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-6 px-3 text-center text-sm text-gray-500",children:"Tidak ada data."})})]})]})}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Menampilkan ",c.length," dari ",t.households.length," KK"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Sumber: Data Lokal"})]})]})]})});export{w as default};
